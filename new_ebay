xm = ::Builder::XmlMarkup.new

xm.instruct!
xm.AddItemRequest {
	xm.RequesterCredentials {
		xm.eBayAuthToken(auth_token)
	}
	xm.Item {
		xm.IncludeRecommendations("true")
		xm.HitCounter("BasicStyle")
		xm.CategoryMappingAllowed("true")
		xm.Country("US")
		xm.Location("History Valley Junction, IA")
		xm.Site("US")
		xm.AutoPay("false")
		xm.PaymentMethods("PayPal")
		xm.PayPalEmailAddress("cale_n_ash@yahoo.com")
		xm.DispatchTimeMax("1")
		xm.PostalCode("50265")
		xm.ShippingTermsInDescription("true")
		xm.GetItFast("false")
		xm.DisableBuyerRequirements("false")
		xm.BuyerRequirementDetails {
			xm.ShipToRegistrationCountry("true")
			xm.MinimumFeedbackScore("-1")
			xm.MaximumItemRequirements {
				xm.MaximumItemCount("10")
				xm.MinimumFeedbackScore("5")
			}
			xm.LinkedPayPalAccount("false")
			xm.MaximumUnpaidItemStrikesInfo {
				xm.Count("2")
				xm.Period("Days_180")
			}
			xm.MaximumBuyerPolicyViolations {
				xm.Count("4")
				xm.Period("Days_30")
			}
		}
		xm.ReturnPolicy {
			xm.RefundOption("MoneyBack")
			xm.RetrunsWithinOption("Days_14")
			xm.ReturnsAcceptedOption("ReturnsAccepted")
			xm.Description("You may return your item for a full refund for any reason within 14 days. Buyer is responsible for return shipping unless there was an error in the listing.")
			xm.ShippingCostPaidByOption("Buyer")
		}
		bin
		xm.Description(description)
		xm.ListingDuration(duration)
		xm.ListingType(listing_type)
		xm.StartPrice(start_price)
		xm.Title(ebay_title)
		xm.PrimaryCategory {
			xm.CategoryID(product.category.ebay_category_id)
		}
		xm.Quantity(quantity)
		xm.ConditionID(condition_id)
		xm.SKU(product.sku)
		xm.ItemSpecifics {
			ebay_attributes.each do |k,v|
				xm.NameValueList {
					xm.Name(k)
					xm.Value(v)
				}
				end
		}
		xm.PictureDetails {
			xm.GalleryType("Plus")
			product.ordered_photos.limit(12).each do |photo|
				xm.PictureURL(UploadPhoto("http://revive-clothiers.com/#{i.uploaded_file(:original)}"))
		}
		xm.ShippingDetails {
			xm.GlobalShipping("false")
			xm.ShippingType("Calculated")
			xm.PaymentInstructions("Please pay within 3 days of auction close")
			xm.CalculatedShippingRate {
				xm.OriginatingPostalCode("50265")
				xm.PackagingHandlingCosts("0")
				xm.ShippingPackage("PackageThickEnvelope")
				xm.WeightMajor(product.shipping_weight[:lbs_only])
				xm.WeightMinor(product.shipping_weight[:oz_only])
				xm.InternationalPackagingHandlingCosts("0")
			}
			xm.ShippingServiceOptions {
				xm.ShippingService(product.shipping_service[:domestic])
				xm.ShippingServicePriority("1")
				xm.FreeShipping(free_shipping)
			}
			xm.InternationalShippingServiceOption {
				xm.ShippingService(product.shipping_service[:international])
				xm.ShippingServicePriority("1")
				xm.ShipToLocation("Worldwide")
			}
		}

	}
	xm.ErrorLanguage("en_us")
	xm.Version("857")
	xm.ErrorHandling("FailOnError")
	xm.WarningLevel("Low")
}